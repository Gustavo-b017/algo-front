/* Busca - mobile-first (adaptado) */

:root {
  /* segurança para variáveis inexistentes */
  --azul: var(--azul, #022e4c);
  --radius: 20px;
  --gap: 0.5rem;
}

.busca {
  display: flex;
  flex-direction: row;
  width: 100%;
  box-sizing: border-box;
  gap: 0.5rem;

  .campo-input,
  .custom-select-selected {
    width: 100%;
    padding: 0.3rem 0.5rem;
    font-size: 0.7rem;
    background: #fff;
    border: 1.5px solid var(--azul);
    box-sizing: border-box;
    outline: none;
  }

  /* Container do campo de busca (input e ícone) */
  .campo-busca {
    flex: 1 1 90%;
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.5rem;

    input,
    .custom-select-selected {
      flex: 1 1 auto;
      min-width: 0;
      border-bottom-left-radius: 13px;
      border-top-left-radius: 13px;
    }

    /* Botão de busca/toggle (touch target maior no mobile) */
    .toggle-btn {
      position: absolute;
      top: 50%;
      right: 3px;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      font-size: 18px;
      padding: 0px;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s ease, color 0.2s ease;
      cursor: pointer;

      &.aberto {
        transform: translateY(-50%) rotate(90deg);
      }
    }
  }

  .campo-placa {

    input,
    .custom-select-selected {
      border-bottom-right-radius: 13px;
      border-top-right-radius: 13px;
    }
  }
}

/* Estilos para listas de sugestões e opções de select */
.sugestoes-list,
.custom-select-options {
  /* Propriedades de posicionamento e layout já estão boas */
  position: absolute;
  top: calc(100% + 0.3rem);
  /* Aumenta o espaçamento entre a barra e a lista */
  left: 0;
  width: 100%;
  z-index: 1000;
  margin: 0;
  max-height: 300px;
  overflow-y: auto;

  /* Melhora o visual do contêiner */
  background-color: #fff;
  border: 1px solid var(--cinza_claro, #e6e6e6);
  border-radius: 5px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);

  list-style: none;
  padding: 0;
  /* Remove o padding do contêiner, o padding vai para o 'li' */
  box-sizing: border-box;

  /* Estilização dos itens da lista */
  li {
    cursor: pointer;
    border-bottom: 1px solid var(--cinza_claro, #e6e6e6);
    color: var(--azul);
    transition: background 0.2s ease, color 0.2s ease;
    font-size: 0.7rem;

    /* Arredonda o topo e base da lista */
    &:first-child {
      border-top-left-radius: calc(var(--radius) - 1px);
      border-top-right-radius: calc(var(--radius) - 1px);
    }

    &:last-child {
      border-bottom: none;
      border-bottom-left-radius: calc(var(--radius) - 1px);
      border-bottom-right-radius: calc(var(--radius) - 1px);
    }

    &.loading {
      text-align: center;
      padding: 0.75rem 1rem;
      /* Espaçamento para o item de carregamento */
      font-style: italic;
      color: var(--cinza_escuro, #666);
    }

    &:hover,
    &.highlighted {
      /* Adiciona classe para navegação por teclado */
      background: var(--cinza_escuro);
      color: #fff;
    }

    button {
      color: var(--azul);
      width: 100%;
      padding: 0.75rem 1rem;
      /* Aumenta o padding do botão para melhor clique */
      border: none;
      background: transparent;
      text-align: left;
      cursor: inherit;
      /* Hereda o cursor do 'li' */
      font-size: inherit;
      /* Hereda o tamanho da fonte */

      &:hover {
        /* Remove o hover do botão para evitar conflito com o 'li' pai */
        color: inherit;
      }
    }

    &:hover button {
      color: #fff;
      /* Altera a cor do texto do botão no hover */
    }
  }
}

/* Opcional: Mostra/esconde a lista de opções */
.custom-select.open .custom-select-options {
  display: block;
}

.custom-select-options {
  display: none;
}

/* ====== Breakpoint: tablet+ / desktop - restaura layout em linha ====== */
@media (min-width: 768px) {
  .busca {
    flex-direction: row;
    align-items: center;
    gap: 0.625rem;

    .campo-input,
    .custom-select-selected {
      font-size: 0.9rem;
      padding: 0.45rem 0.75rem;
    
      border-radius: 10px !important;
    }

    .campo-busca {
      flex: 1 1 60%;
      min-width: 0;

      .toggle-btn {
        right: 10px;
      }
    }
  }

  .campo-busca .toggle-btn {
    width: 46px;
    height: 46px;
    right: 8px;
  }

  /* sugestões ajustadas para desktop */
  .sugestoes-list,
  .custom-select-options {
    top: calc(100% + 0.35rem);
    max-height: 320px;

    li {
      font-size: 0.9rem;
    }
  }
}

/* ====== Pequenas proteções contra overflow em telas muito pequenas ====== */
@media (max-width: 360px) {
  .busca {
    gap: 0.35rem;
  }

  .campo-busca .toggle-btn {
    width: 40px;
    height: 40px;
    right: 6px;
    padding: 6px;
  }

  .busca input,
  .busca .custom-select-selected {
    padding: 0.45rem 0.6rem;
    font-size: 0.95rem;
  }
}